!function(d,e,i){var t,h=[];function m(){return t||(t=new e),t}function x(e,i,t,a){if(t===a)return a;var n=r(e,i,t);return(n-=i)+i<a&&(n=a),I(n)}function F(e,i,t,a){if(t===a)return a;var n=r(e,i,t);return a<n+i&&(n=a),n}function r(e,i,t){for(var a=e;t<a&&t<=a-i;)a-=i;return I(a)}function S(e,i,t){for(var a=e;a<t&&a+i<=t;)a+=i;return I(a)}function M(e){var n=[];return e.each(function(e,i){var t=d(i).text(),a=parseFloat(t);p(t,a)&&n.push(a)}),n}function I(e){return parseFloat(e.toFixed(2))}function p(e,i){return!isNaN(i)&&isFinite(e)}function n(e,i){var t=f(e,i),a=t.slider.prev(".specification-min-max-panel");a.length&&(a.find(".specification-min-value").text(t.sliderMinValue),a.find(".specification-max-value").text(t.sliderMaxValue));var n=t.slider.next(".specification-current-value-panel");n.length&&(n.find(".current-min-value").text(t.sliderMinValue),n.find(".current-max-value").text(t.sliderMaxValue));var r=t.slider.attr("data-specification-slider-id");h.push(r)}function l(e,i){var t=f(e,i),a=t.slider.next(".specification-current-value-panel");a.length&&(a.find(".current-min-value").text(t.minValueSelected),a.find(".current-max-value").text(t.maxValueSelected))}function s(e,i){var n=f(e,i),t=n.slider.parents(".has-specification-slider"),a=t.find(".checkbox-item label");a.siblings("input").prop("checked",!1);var r=!1,l=!1,s=!1;if(a.each(function(e,i){var t=d(i).text(),a=parseFloat(t);p(t,a)&&n.minValueSelected<=a&&a<=n.maxValueSelected&&(n.sliderMinValue===a&&(r=!0),n.sliderMaxValue===a&&(l=!0),d(i).siblings("input").prop("checked",!0),s=!0)}),r&&l&&a.siblings("input").prop("checked",!1),s){var o,c=n.slider.attr("data-specification-slider-id"),u=h.indexOf(c);-1!==u&&h.splice(u,1),o=d(t).find("div[data-optionsGroupId]"),m().requestProductsForSelectedFilters(o)}else!function(){var e="nopAjaxFiltersSpecificationFilterNoProductsDialog",i="#"+e;if(!d(i).length){var t=d(".nopAjaxFilters7Spikes").attr("data-no-products-window-title"),a=d(".nopAjaxFilters7Spikes").attr("data-no-products-window-message");d("<div/>",{id:e,title:t}).html(a).appendTo("body")}m().showNoProductsModalDialog(i)}()}function f(e,i){var t=d(e.target),a=t.slider("option","step"),n=t.slider("option","min"),r=t.slider("option","max"),l={slider:t,sliderStep:a,sliderMinValue:n,sliderMaxValue:r};if(i&&i.values){var s=parseFloat(i.values[0]),o=parseFloat(i.values[1]);s+a<n&&(s=n),r<o+a&&(o=r);var c=m().adjustMinMaxValuesIfInRTL(n,r,s,o);l.minValueSelected=c.minValue,l.maxValueSelected=c.maxValue}return l}i.initializeSlider=function(e){var i=M(d(e).find(".checkbox-item label"));if(i.length<2)d(e).parents(".filter-block").remove();else{var t=Math.min.apply(Math,i),a=Math.max.apply(Math,i);d(e).find(".specification-attribute-slider").slider({min:t,max:a,range:!0,values:[t,a],create:n,slide:l,stop:s})}},i.reInitializeSlider=function(e){var i=M(e.find(".checkbox-item:has(input:checkbox:checked) label"));if(0!==i.length){var t=e.find(".specification-attribute-slider"),a=t.attr("data-specification-slider-id");if(!(-1===h.indexOf(a))){var n=m(),r=Math.min.apply(Math,i),l=Math.max.apply(Math,i);n.isRtl&&(l=[r,r=l][0]);var s=t.slider("option","step"),o=t.slider("option","min"),c=t.slider("option","max"),u=o;n.isRtl&&(c=[o,o=u=c][0]);var d,p,f=n.adjustMinMaxValuesIfInRTL(o,c,r,l);p=n.isRtl?(d=x(u,s,f.maxValue,c),F(u,s,f.minValue,o)):(d=function(e,i,t,a){if(t===a)return a;var n=S(e,i,t);n+i<a&&(n=a);return n}(u,s,f.minValue,o),function(e,i,t,a){if(t===a)return a;var n=S(e,i,t);a<(n+=i)+i&&(n=a);return I(n)}(u,s,f.maxValue,c)),t.slider("option","values",[d,p]),n.isRtl&&(d=x(u,s,l,c),p=F(u,s,r,o));var v=e.find(".specification-current-value-panel");v.find(".current-min-value").html(d),v.find(".current-max-value").html(p)}}}}(jQuery,FiltersManager,window.specificationSliderManager=window.specificationSliderManager||{}),function(s,o,c){o.prototype.buildSpecificationFiltersModel=function(e,i,t,n){var r=new Object;return r.CategoryId=e,r.ManufacturerId=i,r.VendorId=t,r.SpecificationFilterGroups=new Array,s(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var e=s(this),i=parseInt(e.attr("data-optionsGroupId"))||0,a=new Object;a.Id=i,null!=n&&n.is(e)&&(a.IsMain=!0,r.Priority=1),a.FilterItems=new Array,e.find("[data-option-ids]").each(function(){var e=s(this),i=e.attr("data-option-ids"),t=new Object;t.Id=i,t.FilterItemState=o.getFilterItemStateBasedOnAttributes(e),a.FilterItems.push(t)}),r.SpecificationFilterGroups.push(a)}),r},o.prototype.refreshSpecificationFilters=function(t,l){s(".specificationFilterPanel7Spikes .filtersGroupPanel").each(function(){var e=s(this),i=parseInt(e.attr("data-optionsGroupId"))||0,a=s.grep(t.SpecificationFilterGroups,function(e){return e.Id===i});if(0!==a.length){var n="usecheckboxes"===l||e.hasClass("has-specification-slider"),r=!n;e.find("[data-option-ids]").each(function(){var e=s(this),i=parseInt(e.attr("data-option-ids"))||0,t=s.grep(a[0].FilterItems,function(e){return e.Id===i});0!==t.length&&o.addStateClassAndAttributesToOption(e,t[0].FilterItemState,!n)&&(r=!1)}),r&&e.find('[value="0"]').attr("selected","selected"),e.hasClass("has-specification-slider")&&c.reInitializeSlider(e)}})},s(document).ready(function(){s(".specificationFilterPanel7Spikes .has-specification-slider").each(function(e,i){c.initializeSlider(i)}),s(".specificationFilterPanel7Spikes").not(".has-specification-slider").find('.attribute-options-select, .checkbox-list input[type="checkbox"]').on("change",function(){var e=s(this),i=e.closest("div[data-optionsGroupId]");(new o).requestProductsForSelectedFilters(i,e)})})}(jQuery,FiltersManager,specificationSliderManager);